<style>
/* =========================================================
Â  Â Sunil Abraham Project - Improved Utility Toolbox
Â  Â Licence: CC BY-SA 4.0
Â  Â ========================================================= */

:root {
Â  --toolbox-primary: #2d4d7a;
Â  --toolbox-secondary: #e6f2ff;
Â  --toolbox-text: #1e2a38;
Â  --toolbox-heading: #005b96;
Â  --toolbox-danger: #c62828;
Â  --toolbox-shadow: rgba(0, 0, 0, 0.15);
Â  --toolbox-z-index: 1000;
}

/* Wide mode styles */
body.wide-mode .site-sidebar {
Â  display: none;
}

body.wide-mode .page-content,
body.wide-mode main,
body.wide-mode .wrapper {
Â  width: 100%;
Â  max-width: 100%;
Â  float: none;
Â  padding-right: 0;
}

/* Toolbox container */
.utility-toolbox {
Â  position: fixed;
Â  bottom: 35px;
Â  right: 20px;
Â  z-index: var(--toolbox-z-index);
Â  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
Â  font-size: 14px;
Â  display: flex;
Â  flex-direction: column;
Â  align-items: flex-end;
}

/* Toggle button */
.toolbox-toggle {
Â  background: var(--toolbox-primary);
Â  color: #fff;
Â  border: none;
Â  padding: 10px 16px;
Â  border-radius: 6px;
Â  cursor: pointer;
Â  font-size: 14px;
Â  box-shadow: 0 2px 8px var(--toolbox-shadow);
Â  transition: transform 0.2s, box-shadow 0.2s;
}

.toolbox-toggle:hover {
Â  transform: translateY(-2px);
Â  box-shadow: 0 4px 12px var(--toolbox-shadow);
}

.toolbox-toggle:focus {
Â  outline: 2px solid #fff;
Â  outline-offset: 2px;
}

/* Panel */
.toolbox-panel {
Â  display: none;
Â  margin-top: 8px;
Â  flex-direction: column;
Â  gap: 12px;
Â  background: #fff;
Â  padding: 16px;
Â  border-radius: 8px;
Â  width: 260px;
Â  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
Â  max-height: 80vh;
Â  overflow-y: auto;
}

.toolbox-panel.active {
Â  display: flex;
}

.toolbox-title {
Â  text-align: center;
Â  font-weight: bold;
Â  font-size: 16px;
Â  margin-bottom: 8px;
Â  color: #002d62;
}

.toolbox-section {
Â  display: flex;
Â  flex-direction: column;
Â  gap: 6px;
}

.toolbox-label {
Â  font-weight: 600;
Â  color: var(--toolbox-heading);
Â  font-size: 13px;
Â  display: flex;
Â  align-items: center;
Â  gap: 6px;
}

.toolbox-button,
.toolbox-select {
Â  background: var(--toolbox-secondary);
Â  color: var(--toolbox-text);
Â  border: 1px solid #d0e4f7;
Â  padding: 8px 12px;
Â  border-radius: 6px;
Â  cursor: pointer;
Â  font-size: 14px;
Â  transition: background 0.2s, transform 0.1s;
}

.toolbox-button:hover {
Â  background: #d0e4f7;
Â  transform: scale(1.02);
}

.toolbox-button:active {
Â  transform: scale(0.98);
}

.toolbox-button:focus,
.toolbox-select:focus {
Â  outline: 2px solid var(--toolbox-primary);
Â  outline-offset: 2px;
}

.toolbox-select {
Â  width: 100%;
Â  cursor: pointer;
}

.button-group {
Â  display: flex;
Â  gap: 6px;
}

.button-group .toolbox-button {
Â  flex: 1;
}

.value-display {
Â  font-size: 12px;
Â  color: #666;
Â  text-align: center;
Â  padding: 4px;
Â  background: #f5f5f5;
Â  border-radius: 4px;
}

.reset-button {
Â  background: var(--toolbox-danger);
Â  color: #fff;
Â  border: none;
Â  padding: 10px 16px;
Â  border-radius: 6px;
Â  cursor: pointer;
Â  font-size: 14px;
Â  font-weight: 600;
Â  margin-top: 8px;
Â  transition: background 0.2s;
}

.reset-button:hover {
Â  background: #a02020;
}

/* Back to top */
.back-to-top {
Â  position: fixed;
Â  bottom: 35px;
Â  left: 20px;
Â  background: var(--toolbox-primary);
Â  color: #fff;
Â  border: none;
Â  border-radius: 6px;
Â  padding: 10px 14px;
Â  font-size: 18px;
Â  cursor: pointer;
Â  z-index: calc(var(--toolbox-z-index) - 2);
Â  box-shadow: 0 2px 8px var(--toolbox-shadow);
Â  display: none;
Â  transition: transform 0.2s, opacity 0.2s;
}

.back-to-top.visible {
Â  display: block;
Â  animation: fadeInUp 0.3s;
}

.back-to-top:hover {
Â  transform: translateY(-3px);
}

@keyframes fadeInUp {
Â  from {
Â  Â  opacity: 0;
Â  Â  transform: translateY(10px);
Â  }
Â  to {
Â  Â  opacity: 1;
Â  Â  transform: translateY(0);
Â  }
}

/* Responsive */
@media (max-width: 768px) {
Â  .utility-toolbox {
Â  Â  right: 10px;
Â  Â  bottom: 20px;
Â  }
Â Â 
Â  .toolbox-panel {
Â  Â  width: calc(100vw - 40px);
Â  Â  max-width: 280px;
Â  }
Â Â 
Â  .back-to-top {
Â  Â  left: 10px;
Â  Â  bottom: 20px;
Â  }
}

/* Scrollbar styling for toolbox */
.toolbox-panel::-webkit-scrollbar {
Â  width: 6px;
}

.toolbox-panel::-webkit-scrollbar-track {
Â  background: #f1f1f1;
Â  border-radius: 3px;
}

.toolbox-panel::-webkit-scrollbar-thumb {
Â  background: #888;
Â  border-radius: 3px;
}

.toolbox-panel::-webkit-scrollbar-thumb:hover {
Â  background: #555;
}
</style>

<div class="utility-toolbox">
Â  <buttonÂ 
Â  Â  class="toolbox-toggle"Â 
Â  Â  id="toggleToolbox"
Â  Â  aria-expanded="false"
Â  Â  aria-controls="toolboxPanel"
Â  Â  title="Toggle accessibility utilities">
Â  Â  âš™ï¸ Utilities
Â  </button>
Â Â 
Â  <divÂ 
Â  Â  class="toolbox-panel"Â 
Â  Â  id="toolboxPanel"
Â  Â  role="dialog"
Â  Â  aria-label="Accessibility and view controls">
Â  Â Â 
Â  Â  <div class="toolbox-title">Utilities</div>
Â  Â Â 
Â  Â  Â  Â  <div class="toolbox-section">
Â  Â  Â  <label class="toolbox-label" for="fontSizeDisplay">
Â  Â  Â  Â  ğŸ“ Font Size
Â  Â  Â  </label>
Â  Â  Â  <div class="value-display" id="fontSizeDisplay" aria-live="polite">100%</div>
Â  Â  Â  <div class="button-group">
Â  Â  Â  Â  <button class="toolbox-button" id="textZoomIn" aria-label="Increase font size">A+</button>
Â  Â  Â  Â  <button class="toolbox-button" id="textZoomOut" aria-label="Decrease font size">Aâˆ’</button>
Â  Â  Â  Â  <button class="toolbox-button" id="textZoomReset" aria-label="Reset font size">Reset</button>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  Â  Â  <div class="toolbox-section">
Â  Â  Â  <label class="toolbox-label" for="lineHeightDisplay">
Â  Â  Â  Â  ğŸ“ Line Height
Â  Â  Â  </label>
Â  Â  Â  <div class="value-display" id="lineHeightDisplay" aria-live="polite">1.6</div>
Â  Â  Â  <div class="button-group">
Â  Â  Â  Â  <button class="toolbox-button" id="lineHeightIncrease" aria-label="Increase line height">â¬†ï¸</button>
Â  Â  Â  Â  <button class="toolbox-button" id="lineHeightDecrease" aria-label="Decrease line height">â¬‡ï¸</button>
Â  Â  Â  Â  <button class="toolbox-button" id="lineHeightReset" aria-label="Reset line height">Reset</button>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  Â  Â  <div class="toolbox-section">
Â  Â  Â  <label class="toolbox-label" for="fontSelector">
Â  Â  Â  Â  ğŸ”¤ Font Type
Â  Â  Â  </label>
Â  Â  Â  <select id="fontSelector" class="toolbox-select" aria-label="Select font family">
Â  Â  Â  Â  <option value="">Default</option>
Â  Â  Â  Â  <option value="arial">Arial</option>
Â  Â  Â  Â  <option value="georgia">Georgia</option>
Â  Â  Â  Â  <option value="opensans">Open Sans</option>
Â  Â  Â  Â  <option value="merriweather">Merriweather</option>
Â  Â  Â  Â  <option value="roboto">Roboto</option>
Â  Â  Â  Â  <option value="playfair">Playfair Display</option>
Â  Â  Â  Â  <option value="courier">Courier New</option>
Â  Â  Â  </select>
Â  Â  </div>

Â  Â  Â  Â  <div class="toolbox-section">
Â  Â  Â  <label class="toolbox-label" for="fontColorSelect">
Â  Â  Â  Â  ğŸ–ï¸ Text Color
Â  Â  Â  </label>
Â  Â  Â  <select id="fontColorSelect" class="toolbox-select" aria-label="Select text color">
Â  Â  Â  Â  <option value="">Default</option>
Â  Â  Â  Â  <option value="darkgreen">Dark Green</option>
Â  Â  Â  Â  <option value="darkred">Dark Red</option>
Â  Â  Â  Â  <option value="indigo">Indigo</option>
Â  Â  Â  Â  <option value="maroon">Maroon</option>
Â  Â  Â  Â  <option value="midnightblue">Midnight Blue</option>
Â  Â  Â  Â  <option value="saddlebrown">Brown</option>
Â  Â  Â  </select>
Â  Â  </div>

Â  Â  Â  Â  <div class="toolbox-section">
Â  Â  Â  <label class="toolbox-label" for="bgColorSelect">
Â  Â  Â  Â  ğŸ¨ Background
Â  Â  Â  </label>
Â  Â  Â  <select id="bgColorSelect" class="toolbox-select" aria-label="Select background color">
Â  Â  Â  Â  <option value="">Default</option>
Â  Â  Â  Â  <option value="aliceblue">Alice Blue</option>
Â  Â  Â  Â  <option value="beige">Beige</option>
Â  Â  Â  Â  <option value="floralwhite">Floral White</option>
Â  Â  Â  Â  <option value="honeydew">Mint</option>
Â  Â  Â  Â  <option value="ivory">Ivory</option>
Â  Â  Â  Â  <option value="lavenderblush">Lavender</option>
Â  Â  Â  Â  <option value="lemonchiffon">Lemon</option>
Â  Â  Â  Â  <option value="lightgrey">Light Grey</option>
Â  Â  Â  Â  <option value="mintcream">Mint Cream</option>
Â  Â  Â  Â  <option value="whitesmoke">White Smoke</option>
Â  Â  Â  </select>
Â  Â  </div>

Â  Â  Â  Â  <button class="reset-button" id="resetAllBtn" aria-label="Reset all settings to default">
Â  Â  Â  ğŸ”„ Reset All
Â  Â  </button>
Â  </div>
</div>

<buttonÂ 
Â  class="back-to-top"Â 
Â  id="backToTopBtn"
Â  aria-label="Scroll to top of page"
Â  title="Back to Top">
Â  â¬†ï¸
</button>

<script>
(function() {
Â  'use strict';
Â Â 
Â  // Configuration
Â  const CONFIG = {
Â  Â  FONT_SIZE_STEP: 10,
Â  Â  FONT_SIZE_MIN: 60,
Â  Â  FONT_SIZE_MAX: 200,
Â  Â  LINE_HEIGHT_STEP: 0.1,
Â  Â  LINE_HEIGHT_MIN: 1.0,
Â  Â  LINE_HEIGHT_MAX: 3.0,
Â  Â  SCROLL_THRESHOLD: 300
Â  };

Â  // Utility functions
Â  const clamp = (value, min, max) => Math.max(min, Math.min(max, value));
Â  const round = (value, decimals = 1) => Math.round(value * Math.pow(10, decimals)) / Math.pow(10, decimals);
Â Â 
Â  // Storage wrapper with error handling
Â  const storage = {
Â  Â  get: (key, defaultValue) => {
Â  Â  Â  try {
Â  Â  Â  Â  const value = localStorage.getItem(key);
Â  Â  Â  Â  return value !== null ? value : defaultValue;
Â  Â  Â  } catch (e) {
Â  Â  Â  Â  console.warn('localStorage get failed:', e);
Â  Â  Â  Â  return defaultValue;
Â  Â  Â  }
Â  Â  },
Â  Â  set: (key, value) => {
Â  Â  Â  try {
Â  Â  Â  Â  localStorage.setItem(key, value);
Â  Â  Â  } catch (e) {
Â  Â  Â  Â  console.warn('localStorage set failed:', e);
Â  Â  Â  }
Â  Â  },
Â  Â  remove: (key) => {
Â  Â  Â  try {
Â  Â  Â  Â  localStorage.removeItem(key);
Â  Â  Â  } catch (e) {
Â  Â  Â  Â  console.warn('localStorage remove failed:', e);
Â  Â  Â  }
Â  Â  }
Â  };

Â  // DOM element cache
Â  const elements = {
Â  Â  toggle: document.getElementById('toggleToolbox'),
Â  Â  panel: document.getElementById('toolboxPanel'),
Â  Â  backToTop: document.getElementById('backToTopBtn'),
Â  Â  fontSizeDisplay: document.getElementById('fontSizeDisplay'),
Â  Â  lineHeightDisplay: document.getElementById('lineHeightDisplay'),
Â  Â  targets: null // Will be set after DOM ready
Â  };

Â  // Cache target elements
Â  function cacheTargets() {
Â  Â  // These are the elements that will receive accessibility styling (font size, line height, etc.)
Â  Â  // Customise this selector based on your site's main content area structure.
Â  Â  elements.targets = document.querySelectorAll('main, article, .page-content, .wrapper');
Â  }

Â  // Initialize after DOM load
Â  window.addEventListener('load', function() {
Â  Â  cacheTargets();
Â  Â Â 
Â  Â  // Toolbox toggle
Â  Â  elements.toggle.addEventListener('click', toggleToolbox);
Â  Â Â 
Â  Â  // Close on Escape key
Â  Â  document.addEventListener('keydown', function(e) {
Â  Â  Â  if (e.key === 'Escape' && elements.panel.classList.contains('active')) {
Â  Â  Â  Â  toggleToolbox();
Â  Â  Â  }
Â  Â  });
Â  Â Â 
Â  Â  // Initialize features
Â  Â  initFontSize();
Â  Â  initLineHeight();
Â  Â  initFontFamily();
Â  Â  initFontColor();
Â  Â  initBackgroundColor();
Â  Â  initResetButton();
Â  Â  initBackToTop();
Â  });

Â  // Toggle toolbox
Â  function toggleToolbox() {
Â  Â  const isExpanded = elements.panel.classList.toggle('active');
Â  Â  elements.toggle.setAttribute('aria-expanded', isExpanded);
Â  Â  elements.toggle.textContent = isExpanded ? 'âŒ Close' : 'âš™ï¸ Utilities';
Â  }

Â  // Font Size
Â  function initFontSize() {
Â  Â  let fontSize = parseFloat(storage.get('zoomFontSize', '100'));
Â  Â Â 
Â  Â  const applyFontSize = () => {
Â  Â  Â  fontSize = clamp(fontSize, CONFIG.FONT_SIZE_MIN, CONFIG.FONT_SIZE_MAX);
Â  Â  Â  elements.targets.forEach(el => el.style.fontSize = fontSize + '%');
Â  Â  Â  elements.fontSizeDisplay.textContent = fontSize + '%';
Â  Â  Â  storage.set('zoomFontSize', fontSize);
Â  Â  };
Â  Â Â 
Â  Â  document.getElementById('textZoomIn').addEventListener('click', () => {
Â  Â  Â  fontSize += CONFIG.FONT_SIZE_STEP;
Â  Â  Â  applyFontSize();
Â  Â  });
Â  Â Â 
Â  Â  document.getElementById('textZoomOut').addEventListener('click', () => {
Â  Â  Â  fontSize -= CONFIG.FONT_SIZE_STEP;
Â  Â  Â  applyFontSize();
Â  Â  });
Â  Â Â 
Â  Â  document.getElementById('textZoomReset').addEventListener('click', () => {
Â  Â  Â  fontSize = 100;
Â  Â  Â  applyFontSize();
Â  Â  });
Â  Â Â 
Â  Â  applyFontSize();
Â  }

Â  // Line Height
Â  function initLineHeight() {
Â  Â  let lineHeight = parseFloat(storage.get('customLineHeight', '1.6'));
Â  Â Â 
Â  Â  const applyLineHeight = () => {
Â  Â  Â  lineHeight = clamp(lineHeight, CONFIG.LINE_HEIGHT_MIN, CONFIG.LINE_HEIGHT_MAX);
Â  Â  Â  lineHeight = round(lineHeight, 1);
Â  Â  Â  elements.targets.forEach(el => el.style.lineHeight = lineHeight);
Â  Â  Â  elements.lineHeightDisplay.textContent = lineHeight.toFixed(1);
Â  Â  Â  storage.set('customLineHeight', lineHeight);
Â  Â  };
Â  Â Â 
Â  Â  document.getElementById('lineHeightIncrease').addEventListener('click', () => {
Â  Â  Â  lineHeight += CONFIG.LINE_HEIGHT_STEP;
Â  Â  Â  applyLineHeight();
Â  Â  });
Â  Â Â 
Â  Â  document.getElementById('lineHeightDecrease').addEventListener('click', () => {
Â  Â  Â  lineHeight -= CONFIG.LINE_HEIGHT_STEP;
Â  Â  Â  applyLineHeight();
Â  Â  });
Â  Â Â 
Â  Â  document.getElementById('lineHeightReset').addEventListener('click', () => {
Â  Â  Â  lineHeight = 1.6;
Â  Â  Â  applyLineHeight();
Â  Â  });
Â  Â Â 
Â  Â  applyLineHeight();
Â  }

Â  // Font Family
Â  function initFontFamily() {
Â  Â  const fontSelector = document.getElementById('fontSelector');
Â  Â  const fontMap = {
Â  Â  Â  arial: "Arial, sans-serif",
Â  Â  Â  courier: "'Courier New', monospace",
Â  Â  Â  georgia: "Georgia, serif",
Â  Â  Â  opensans: "'Open Sans', sans-serif",
Â  Â  Â  merriweather: "'Merriweather', serif",
Â  Â  Â  playfair: "'Playfair Display', serif",
Â  Â  Â  roboto: "'Roboto', sans-serif"
Â  Â  };

Â  Â  // Lazy load Google Fonts
Â  Â  const loadFont = (fontKey) => {
Â  Â  Â  const fontUrls = {
Â  Â  Â  Â  opensans: 'https://fonts.googleapis.com/css2?family=Open+Sans&display=swap',
Â  Â  Â  Â  merriweather: 'https://fonts.googleapis.com/css2?family=Merriweather&display=swap',
Â  Â  Â  Â  playfair: 'https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap',
Â  Â  Â  Â  roboto: 'https://fonts.googleapis.com/css2?family=Roboto&display=swap'
Â  Â  Â  };
Â  Â  Â Â 
Â  Â  Â  if (fontUrls[fontKey] && !document.querySelector(`link[href="${fontUrls[fontKey]}"]`)) {
Â  Â  Â  Â  const link = document.createElement('link');
Â  Â  Â  Â  link.href = fontUrls[fontKey];
Â  Â  Â  Â  link.rel = 'stylesheet';
Â  Â  Â  Â  document.head.appendChild(link);
Â  Â  Â  }
Â  Â  };

Â  Â  const applyFont = (key) => {
Â  Â  Â  if (key) loadFont(key);
Â  Â  Â  const fontFamily = fontMap[key] || "";
Â  Â  Â  elements.targets.forEach(el => el.style.fontFamily = fontFamily);
Â  Â  Â  storage.set('fontFamily', key);
Â  Â  };

Â  Â  fontSelector.addEventListener('change', () => applyFont(fontSelector.value));
Â  Â Â 
Â  Â  const savedFont = storage.get('fontFamily', '');
Â  Â  if (savedFont) {
Â  Â  Â  fontSelector.value = savedFont;
Â  Â  Â  applyFont(savedFont);
Â  Â  }
Â  }

Â  // Font Color
Â  function initFontColor() {
Â  Â  const fontColorSelect = document.getElementById('fontColorSelect');
Â  Â Â 
Â  Â  const applyColor = (color) => {
Â  Â  Â  elements.targets.forEach(el => el.style.color = color);
Â  Â  Â  storage.set('fontColor', color);
Â  Â  };
Â  Â Â 
Â  Â  fontColorSelect.addEventListener('change', () => applyColor(fontColorSelect.value));
Â  Â Â 
Â  Â  const savedColor = storage.get('fontColor', '');
Â  Â  if (savedColor) {
Â  Â  Â  fontColorSelect.value = savedColor;
Â  Â  Â  applyColor(savedColor);
Â  Â  }
Â  }

Â  // Background Color
Â  function initBackgroundColor() {
Â  Â  const bgSelect = document.getElementById('bgColorSelect');
Â  Â Â 
Â  Â  const applyBackground = (color) => {
Â  Â  Â  document.body.style.backgroundColor = color;
Â  Â  Â  document.documentElement.style.backgroundColor = color;
Â  Â  Â  elements.targets.forEach(el => el.style.backgroundColor = color);
Â  Â  Â  storage.set('bgColor', color);
Â  Â  };
Â  Â Â 
Â  Â  bgSelect.addEventListener('change', () => applyBackground(bgSelect.value));
Â  Â Â 
Â  Â  const savedBg = storage.get('bgColor', '');
Â  Â  if (savedBg) {
Â  Â  Â  bgSelect.value = savedBg;
Â  Â  Â  applyBackground(savedBg);
Â  Â  }
Â  }

Â  // Reset All
Â  function initResetButton() {
Â  Â  document.getElementById('resetAllBtn').addEventListener('click', () => {
Â  Â  Â  ['zoomFontSize', 'customLineHeight', 'fontFamily', 'fontColor', 'bgColor'].forEach(k => storage.remove(k));
Â  Â  Â Â 
Â  Â  Â  elements.targets.forEach(el => {
Â  Â  Â  Â  el.style.fontSize = '';
Â  Â  Â  Â  el.style.lineHeight = '';
Â  Â  Â  Â  el.style.fontFamily = '';
Â  Â  Â  Â  el.style.color = '';
Â  Â  Â  Â  el.style.backgroundColor = '';
Â  Â  Â  });
Â  Â  Â Â 
Â  Â  Â  document.body.style.backgroundColor = '';
Â  Â  Â  document.documentElement.style.backgroundColor = '';
Â  Â  Â Â 
Â  Â  Â  document.getElementById('fontSelector').value = '';
Â  Â  Â  document.getElementById('fontColorSelect').value = '';
Â  Â  Â  document.getElementById('bgColorSelect').value = '';
Â  Â  Â Â 
Â  Â  Â  // Reinitialize to apply defaults
Â  Â  Â  initFontSize();
Â  Â  Â  initLineHeight();
Â  Â  });
Â  }

Â  // Back to Top
Â  function initBackToTop() {
Â  Â  let ticking = false;
Â  Â Â 
Â  Â  window.addEventListener('scroll', () => {
Â  Â  Â  if (!ticking) {
Â  Â  Â  Â  window.requestAnimationFrame(() => {
Â  Â  Â  Â  Â  elements.backToTop.classList.toggle('visible', window.scrollY > CONFIG.SCROLL_THRESHOLD);
Â  Â  Â  Â  Â  ticking = false;
Â  Â  Â  Â  });
Â  Â  Â  Â  ticking = true;
Â  Â  Â  }
Â  Â  });
Â  Â Â 
Â  Â  elements.backToTop.addEventListener('click', () => {
Â  Â  Â  window.scrollTo({ top: 0, behavior: 'smooth' });
Â  Â  });
Â  }
})();
</script>
