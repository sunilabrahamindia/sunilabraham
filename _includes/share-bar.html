<!-- =========================================================
     Sunil Abraham Project
     Top Share & Search Bar (Google Site Search)
     Licence: CC BY-SA 4.0
     ========================================================= -->

<div id="sc-share-bar" role="navigation" aria-label="Page tools">

  <!-- Search button -->
  <button id="sc-search-btn" aria-label="Search this site" title="Search this site">
    <img src="https://cdn-icons-png.flaticon.com/128/622/622669.png" alt="" />
  </button>

  <!-- Visible share buttons -->
  <div class="sc-share-buttons" id="sc-visible-buttons">
    <button onclick="scShare('facebook')" aria-label="Share on Facebook" title="Share on Facebook">
      <img src="https://cdn-icons-png.flaticon.com/128/145/145802.png" alt="" />
    </button>
    <button onclick="scShare('x')" aria-label="Post on X" title="Post on X">
      <img src="https://cdn-icons-png.flaticon.com/128/5968/5968958.png" alt="" />
    </button>
    <button onclick="scShare('linkedin')" aria-label="Share on LinkedIn" title="Share on LinkedIn">
      <img src="https://cdn-icons-png.flaticon.com/128/145/145807.png" alt="" />
    </button>
    <button onclick="scShare('email')" aria-label="Share via email" title="Share via email">
      <img src="https://cdn-icons-png.flaticon.com/128/732/732200.png" alt="" />
    </button>
    <button onclick="location.href='https://sunilabraham.in/feed.xml'" aria-label="RSS feed" title="RSS feed">
      <img src="https://upload.wikimedia.org/wikipedia/commons/4/43/Feed-icon.svg" alt="" width="22" height="22" />
    </button>
    <button onclick="scShare('print')" aria-label="Print this page" title="Print this page">
      <img src="https://cdn-icons-png.flaticon.com/128/337/337946.png" alt="" />
    </button>
    <button id="sc-more-toggle" aria-expanded="false" aria-label="More share options" title="More">
      <img src="https://cdn-icons-png.flaticon.com/128/32/32195.png" alt="" />
    </button>
  </div>

  <!-- Hidden share buttons -->
  <div class="sc-share-buttons" id="sc-hidden-buttons" hidden>
    <button onclick="scShare('whatsapp')" aria-label="Share on WhatsApp"><img src="https://cdn-icons-png.flaticon.com/128/733/733585.png" alt="" /></button>
    <button onclick="scShare('telegram')" aria-label="Share on Telegram"><img src="https://cdn-icons-png.flaticon.com/128/2111/2111646.png" alt="" /></button>
    <button onclick="scShare('reddit')" aria-label="Share on Reddit"><img src="https://cdn-icons-png.flaticon.com/128/2111/2111589.png" alt="" /></button>
    <button onclick="scShare('pinterest')" aria-label="Share on Pinterest"><img src="https://cdn-icons-png.flaticon.com/128/145/145808.png" alt="" /></button>
    <button onclick="scShare('copy')" aria-label="Copy page link"><img src="https://cdn-icons-png.flaticon.com/128/60/60577.png" alt="" /></button>
  </div>

  <!-- Close bar -->
  <button id="sc-share-close" aria-label="Hide tools" title="Hide">
    <img src="https://cdn-icons-png.flaticon.com/128/1828/1828774.png" alt="" />
  </button>
</div>

<style>
#sc-share-bar {
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 9999;
  background: rgba(248,250,252,0.96);
  backdrop-filter: blur(6px);
  border-bottom: 1px solid rgba(0,0,0,0.06);
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
}

#sc-share-bar button {
  background: transparent;
  border: none;
  border-radius: 6px;
  padding: 5px;
  cursor: pointer;
}

#sc-share-bar button:focus-visible {
  outline: 2px solid #1f4fd8;
  outline-offset: 2px;
}

#sc-share-bar img {
  width: 22px;
  height: 22px;
}

#sc-search-btn { position: absolute; left: 8px; }
#sc-share-close { position: absolute; right: 8px; }

.sc-share-buttons { display: flex; gap: 8px; }

.search-inline {
  background: #fff;
  border: 1px solid #cfd6df;
  border-radius: 6px;
  padding: 6px 10px;
  font-size: 14px;
  margin-left: 8px;
}

.search-close-btn {
  background: none;
  border: none;
  font-size: 18px;
  margin-left: 6px;
  cursor: pointer;
}

body { padding-top: 40px; }
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {

  window.scShare = function(type) {
    const url = encodeURIComponent(location.href);
    const title = encodeURIComponent(document.title);

    const links = {
      facebook: `https://www.facebook.com/sharer/sharer.php?u=${url}`,
      x: `https://twitter.com/intent/tweet?text=${title}&url=${url}`,
      linkedin: `https://www.linkedin.com/sharing/share-offsite/?url=${url}`,
      email: `mailto:?subject=${title}&body=${title}%0A${url}`
    };

    if (type === 'copy') {
      navigator.clipboard.writeText(location.href);
      alert('Link copied');
      return;
    }

    if (type === 'print') {
      window.print();
      return;
    }

    if (links[type]) {
      location.href = links[type];
    }
  };

  const moreBtn = document.getElementById('sc-more-toggle');
  const hidden = document.getElementById('sc-hidden-buttons');

  moreBtn.onclick = () => {
    const open = !hidden.hasAttribute('hidden');
    hidden.toggleAttribute('hidden');
    moreBtn.setAttribute('aria-expanded', String(!open));
  };

  document.getElementById('sc-share-close').onclick = () => {
    document.getElementById('sc-share-bar').style.display = 'none';
  };

  document.getElementById('sc-search-btn').onclick = () => {
    if (document.querySelector('.search-inline')) return;

    const form = document.createElement('form');
    form.action = 'https://www.google.com/search';
    form.method = 'get';
    form.style.display = 'inline-flex';
    form.style.alignItems = 'center';

    const q = document.createElement('input');
    q.type = 'text';
    q.name = 'q';
    q.className = 'search-inline';
    q.placeholder = 'Search this site';
    q.setAttribute('aria-label', 'Search this site');

    const site = document.createElement('input');
    site.type = 'hidden';
    site.name = 'q';
    site.value = 'site:' + location.hostname;

    const close = document.createElement('button');
    close.type = 'button';
    close.className = 'search-close-btn';
    close.textContent = 'Ã—';
    close.onclick = () => form.remove();

    form.append(site, q, close);
    document.getElementById('sc-share-bar').appendChild(form);
    q.focus();
  };
});
</script>
