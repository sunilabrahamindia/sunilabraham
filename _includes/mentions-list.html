{% assign mentions = site.data.mentions | sort: "accessed" | reverse %}

<ul class="mentions-list">
{% for m in mentions %}
  <li class="mention-item">

    <div class="mention-line mention-source">
      ğŸ§­ <strong>{{ m.source }}</strong>
    </div>

    <div class="mention-line mention-title">
      ğŸ“„ <strong>Title:</strong> {{ m.title }}
    </div>

    <div class="mention-line mention-url">
      ğŸ”— <strong>URL:</strong>
      <a href="{{ m.url }}" rel="noopener noreferrer nofollow">
        {{ m.url }}
      </a>
    </div>

    {% if m.cited_page and m.cited_page != "" %}
      {% assign all_pages = site.pages | concat: site.documents %}
      {% assign cited = all_pages | where: "url", m.cited_page | first %}
      <div class="mention-line mention-cited">
        ğŸ” <strong>TSAP page mentioned:</strong>
        {% if cited and cited.title %}
          <a href="{{ cited.url }}">{{ cited.title }}</a>
        {% else %}
          <a href="{{ m.cited_page }}">{{ m.cited_page }}</a>
        {% endif %}
      </div>
    {% endif %}

    {% if m.accessed and m.accessed != "" %}
      <div class="mention-line mention-accessed">
        ğŸ—“ï¸ <strong>Accessed:</strong>
        {{ m.accessed | date: "%-d %B %Y" }}
      </div>
    {% endif %}

  </li>
{% endfor %}
</ul>

<style>
/* Mentions list */

.mentions-list {
  list-style: none;
  padding: 0;
  margin: 1.5rem 0;
}

.mention-item {
  margin-bottom: 1.25rem;
  padding: 1rem 1.1rem;
  background-color: #f7f7f7;
  border: 1px solid #ddd;
  border-left: 4px solid #444;
  border-radius: 6px;
}

/* One fact per line */

.mention-line {
  margin: 0.25rem 0;
  font-size: 0.95rem;
  line-height: 1.45;
}

/* Long URLs */

.mention-url a {
  word-break: break-word;
  overflow-wrap: anywhere;
}

/* Mobile tuning */

@media (max-width: 600px) {
  .mention-item {
    padding: 0.9rem;
  }

  .mention-line {
    font-size: 0.9rem;
  }
}
</style>
