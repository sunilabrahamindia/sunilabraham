---
layout: default
title: "Sandbox3"
sitemap: false
robots: noindex
---

<div class="media-controls">
  <input
    type="search"
    id="media-search"
    placeholder="Search titles or sources…"
    aria-label="Search media articles"
  >

  <div class="sort-controls">
    <button data-sort="date_desc">Newest First</button>
    <button data-sort="date_asc">Oldest First</button>
    <button data-sort="alpha">Alphabetical</button>
  </div>

  <div id="media-count" class="media-count"></div>
</div>

{% comment %}
Collect media article pages
{% endcomment %}
{% assign article_list = site.pages
     | where_exp: "p", "p.categories contains 'Media articles'"
%}

<ol id="media-list">
{% for page in article_list %}
  <li
    data-title="{{ page.title | downcase }}"
    data-source="{{ page.source | downcase }}"
    data-date="{{ page.date | date: '%Y-%m-%d' }}"
  >
    <a href="{{ page.url | relative_url }}">{{ page.title }}</a><br>
    <span class="meta">
      {{ page.source }} • {{ page.date | date: "%-d %B %Y" }}
    </span>
  </li>
{% endfor %}
</ol>

<style>
.media-controls {
  margin: 1rem 0 1.4rem 0;
}

#media-search {
  width: 100%;
  max-width: 420px;
  padding: 0.55rem 0.7rem;
  margin-bottom: 0.7rem;
  border: 1px solid #cdd7e5;
  border-radius: 6px;
  font-size: 0.95rem;
}

#media-search:focus {
  outline: 2px solid #3278d6;
  outline-offset: 2px;
}

.sort-controls {
  margin-bottom: 0.4rem;
}

.sort-controls button {
  background: #eef3fa;
  border: 1px solid #cdd7e5;
  padding: 0.45rem 0.85rem;
  margin-right: 0.5rem;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.9rem;
}

.sort-controls button:hover {
  background: #dbe6f5;
}

.sort-controls button.active-sort {
  background: #3278d6;
  color: #fff;
  border-color: #3278d6;
}

.media-count {
  font-size: 0.9rem;
  color: #555;
  margin-top: 0.2rem;
}

#media-list li {
  margin-bottom: 0.9rem;
}

.meta {
  font-size: 0.9rem;
  color: #555;
}
</style>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const list = document.getElementById('media-list');
  const items = Array.from(list.querySelectorAll('li'));
  const searchInput = document.getElementById('media-search');
  const buttons = document.querySelectorAll('.sort-controls button');
  const countBox = document.getElementById('media-count');

  let currentSort = localStorage.getItem('mediaSort') || 'date_desc';

  function updateCount(visibleItems) {
    countBox.textContent = `Showing ${visibleItems} of ${items.length} articles`;
  }

  function applySearch() {
    const query = searchInput.value.toLowerCase();
    let visible = 0;

    items.forEach(li => {
      const text = li.dataset.title + ' ' + li.dataset.source;
      const match = text.includes(query);
      li.style.display = match ? '' : 'none';
      if (match) visible++;
    });

    updateCount(visible);
  }

  function sortList(type) {
    let sorted = [...items];

    if (type === 'alpha') {
      sorted.sort((a, b) =>
        a.dataset.title.localeCompare(b.dataset.title)
      );
    } else if (type === 'date_asc') {
      sorted.sort((a, b) =>
        a.dataset.date.localeCompare(b.dataset.date)
      );
    } else {
      sorted.sort((a, b) =>
        b.dataset.date.localeCompare(a.dataset.date)
      );
    }

    list.innerHTML = '';
    sorted.forEach(li => list.appendChild(li));

    buttons.forEach(btn => btn.classList.remove('active-sort'));
    document.querySelector(`[data-sort="${type}"]`).classList.add('active-sort');

    localStorage.setItem('mediaSort', type);
    applySearch();
  }

  // Initial state
  sortList(currentSort);
  updateCount(items.length);

  // Events
  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      sortList(btn.dataset.sort);
    });
  });

  searchInput.addEventListener('input', applySearch);
});
</script>

