---
layout: default
title: "Sandbox4"
sitemap: false
authors: ["Tito Dutta", "Dutta Tito"]
robots: noindex
---


<h2>Daily creation log</h2>
<div id="log-by-month"></div>

<hr>

<h2 id="streak-heading">Current creation streak</h2>
<p id="streak-summary"></p>

<div class="container">
  <div class="garland" id="garland"></div>
</div>

<style>
.container {
  background: #fff;
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  margin-top: 20px;
}

.garland {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 16px;
}

.flower-container {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.flower {
  position: relative;
  width: 60px;
  height: 60px;
}

.petal {
  position: absolute;
  width: 26px;
  height: 30px;
  background: linear-gradient(135deg, #ef4444, #b91c1c);
  border-radius: 50% 50% 45% 55%;
  top: 50%;
  left: 50%;
  transform-origin: 50% 90%;
}

.petal:nth-child(1) { transform: translate(-50%, -50%) rotate(0deg) translateY(-10px); }
.petal:nth-child(2) { transform: translate(-50%, -50%) rotate(72deg) translateY(-10px); }
.petal:nth-child(3) { transform: translate(-50%, -50%) rotate(144deg) translateY(-10px); }
.petal:nth-child(4) { transform: translate(-50%, -50%) rotate(216deg) translateY(-10px); }
.petal:nth-child(5) { transform: translate(-50%, -50%) rotate(288deg) translateY(-10px); }

.center {
  position: absolute;
  width: 10px;
  height: 10px;
  background: radial-gradient(circle, #fde047, #facc15);
  border-radius: 50%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.info {
  font-size: 11px;
  margin-top: 6px;
  text-align: center;
}
</style>

<script>
/* ===============================
   1. EXPOSE PAGE DATA (Liquid)
================================ */
const pages = [
  {% for page in site.pages %}
    {% unless page.published == false or page.url contains '/sandbox/' %}
      {% if page.created %}
        { created: "{{ page.created }}" },
      {% endif %}
    {% endunless %}
  {% endfor %}
];

/* ===============================
   2. COUNT PAGES PER DAY
================================ */
const counts = {};
pages.forEach(p => {
  counts[p.created] = (counts[p.created] || 0) + 1;
});

/* ===============================
   3. DATE HELPERS
================================ */
function nextDate(d) {
  const x = new Date(d);
  x.setDate(x.getDate() + 1);
  return x.toISOString().slice(0,10);
}

function prevDate(d) {
  const x = new Date(d);
  x.setDate(x.getDate() - 1);
  return x.toISOString().slice(0,10);
}

function monthLabel(d) {
  return new Date(d).toLocaleString("en-IN", {
    month: "long",
    year: "numeric"
  });
}

/* ===============================
   4. FULL DAILY LOG (GROUPED)
================================ */
const startDate = "2025-10-19";
const today = new Date().toISOString().slice(0,10);

const logContainer = document.getElementById("log-by-month");
let currentMonth = null;
let list = null;

for (let d = startDate; d <= today; d = nextDate(d)) {
  const month = monthLabel(d);

  if (month !== currentMonth) {
    const h3 = document.createElement("h3");
    h3.textContent = month;
    logContainer.appendChild(h3);

    list = document.createElement("ol");
    logContainer.appendChild(list);
    currentMonth = month;
  }

  const count = counts[d] || 0;
  const li = document.createElement("li");
  li.textContent = `${d}: ${count} ${count === 1 ? "page" : "pages"}`;
  list.appendChild(li);
}

/* ===============================
   5. STREAK CALCULATION
================================ */
let streak = 0;
let streakDates = [];
let cursor = today;

while ((counts[cursor] || 0) > 0) {
  streakDates.unshift({
    date: cursor,
    count: counts[cursor]
  });
  streak++;
  cursor = prevDate(cursor);
}

const summary = document.getElementById("streak-summary");

if (streak === 0) {
  summary.textContent = "No active creation streak today.";
} else {
  summary.textContent =
    `Current streak: ${streak} consecutive day${streak === 1 ? "" : "s"} ` +
    `(since ${streakDates[0].date})`;
}

/* ===============================
   6. STREAK GARLAND
================================ */
const garland = document.getElementById("garland");

function createFlower(date, count) {
  const wrap = document.createElement("div");
  wrap.className = "flower-container";

  const flower = document.createElement("div");
  flower.className = "flower";

  for (let i = 0; i < 5; i++) {
    flower.appendChild(document.createElement("div")).className = "petal";
  }

  flower.appendChild(document.createElement("div")).className = "center";

  const info = document.createElement("div");
  info.className = "info";
  info.textContent = `${date}: ${count} ${count === 1 ? "page" : "pages"}`;

  wrap.appendChild(flower);
  wrap.appendChild(info);
  return wrap;
}

streakDates.forEach(d => {
  garland.appendChild(createFlower(d.date, d.count));
});
</script>
