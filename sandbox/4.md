---
layout: default
title: "Sandbox4"
sitemap: false
authors: ["Tito Dutta", "Dutta Tito"]
robots: noindex
---
<div id="streak-page">
<section class="lead">
  <p>
    This page visualises daily publishing activity on the site.
    The flower garland represents the <strong>current uninterrupted creation streak</strong>,
    while the log below records <strong>all days</strong>, including those with no new pages.
  </p>
</section>

<h2>Current Creation Streak</h2>
<p id="streak-summary"></p>

<div class="container">
  <div class="garland" id="garland"></div>
</div>

<h2>Daily Creation Log</h2>
<div id="log-by-month"></div>

<style>
/* ---------- Base ---------- */
#streak-page {
  background: linear-gradient(135deg, #0f766e 0%, #065f46 100%);
  padding: 12px;
  border-radius: 12px;
}

.lead {
  background: rgba(255,255,255,0.9);
  padding: 12px 16px;
  border-radius: 10px;
  margin-bottom: 20px;
}

/* ---------- Garland ---------- */
.container {
  background: rgba(255,255,255,0.97);
  border-radius: 20px;
  padding: 20px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.3);
  margin-bottom: 30px;
}

.garland {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 18px;
}

.flower-container {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.flower {
  position: relative;
  width: 55px;
  height: 55px;
  cursor: pointer;
  transition: transform 0.3s ease;
}

.flower:hover {
  transform: scale(1.25);
  z-index: 10;
}

.flower.animate {
  animation: sway 4s ease-in-out infinite;
}

.petal {
  position: absolute;
  width: 24px;
  height: 28px;
  background: linear-gradient(135deg, #ef4444, #b91c1c);
  border-radius: 45% 55% 40% 60%;
  top: 50%;
  left: 50%;
  transform-origin: 50% 90%;
}

.petal:nth-child(1) { transform: translate(-50%,-50%) rotate(0deg) translateY(-8px); }
.petal:nth-child(2) { transform: translate(-50%,-50%) rotate(72deg) translateY(-8px); }
.petal:nth-child(3) { transform: translate(-50%,-50%) rotate(144deg) translateY(-8px); }
.petal:nth-child(4) { transform: translate(-50%,-50%) rotate(216deg) translateY(-8px); }
.petal:nth-child(5) { transform: translate(-50%,-50%) rotate(288deg) translateY(-8px); }

.center {
  position: absolute;
  width: 8px;
  height: 8px;
  background: radial-gradient(circle, #fde047, #facc15);
  border-radius: 50%;
  top: 50%;
  left: 50%;
  transform: translate(-50%,-50%);
}

.info {
  font-size: 10px;
  margin-top: 6px;
  text-align: center;
}

/* ---------- Animation ---------- */
@keyframes sway {
  0%,100% { transform: translateY(0); }
  25% { transform: translateY(-4px) rotate(1deg); }
  50% { transform: translateY(-7px) rotate(-1deg); }
  75% { transform: translateY(-4px) rotate(1deg); }
}

/* ---------- Log ---------- */
#log-by-month h3 {
  margin-top: 20px;
}
</style>

<script>
/* ========== DATA FROM JEKYLL ========== */
const pages = [
  {% for page in site.pages %}
    {% unless page.published == false or page.url contains '/sandbox/' %}
      {% if page.created %}
        { created: "{{ page.created }}" },
      {% endif %}
    {% endunless %}
  {% endfor %}
];

/* ========== COUNT PER DAY ========== */
const counts = {};
pages.forEach(p => {
  counts[p.created] = (counts[p.created] || 0) + 1;
});

/* ========== HELPERS ========== */
function nextDate(d) {
  const x = new Date(d);
  x.setDate(x.getDate() + 1);
  return x.toISOString().slice(0,10);
}
function prevDate(d) {
  const x = new Date(d);
  x.setDate(x.getDate() - 1);
  return x.toISOString().slice(0,10);
}
function monthLabel(d) {
  return new Date(d).toLocaleString("en-IN", { month: "long", year: "numeric" });
}

const today = new Date().toISOString().slice(0,10);

/* ========== STREAK ========== */
let streakDates = [];
let cursor = today;

while ((counts[cursor] || 0) > 0) {
  streakDates.unshift({ date: cursor, count: counts[cursor] });
  cursor = prevDate(cursor);
}

const summary = document.getElementById("streak-summary");
if (streakDates.length === 0) {
  summary.textContent = "No active creation streak today.";
} else {
  summary.textContent =
    `Current streak: ${streakDates.length} day${streakDates.length === 1 ? "" : "s"} (since ${streakDates[0].date})`;
}

/* ========== RENDER FLOWERS ========== */
const garland = document.getElementById("garland");

streakDates.forEach((d, i) => {
  const wrap = document.createElement("div");
  wrap.className = "flower-container";

  const flower = document.createElement("div");
  flower.className = "flower animate";
  flower.style.animationDelay = `${(i * 0.1) % 4}s`;

  for (let j = 0; j < 5; j++) {
    flower.appendChild(document.createElement("div")).className = "petal";
  }
  flower.appendChild(document.createElement("div")).className = "center";

  const info = document.createElement("div");
  info.className = "info";
  info.textContent =
    `${d.date}: ${d.count} ${d.count === 1 ? "page" : "pages"}`;

  wrap.appendChild(flower);
  wrap.appendChild(info);
  garland.appendChild(wrap);
});

/* ========== DAILY LOG ========== */
const log = document.getElementById("log-by-month");
const startDate = "2025-10-19";
let currentMonth = null;
let list;

for (let d = startDate; d <= today; d = nextDate(d)) {
  const m = monthLabel(d);
  if (m !== currentMonth) {
    const h3 = document.createElement("h3");
    h3.textContent = m;
    log.appendChild(h3);
    list = document.createElement("ol");
    log.appendChild(list);
    currentMonth = m;
  }
  const c = counts[d] || 0;
  const li = document.createElement("li");
  li.textContent = `${d}: ${c} ${c === 1 ? "page" : "pages"}`;
  list.appendChild(li);
}
</script>
</div>
