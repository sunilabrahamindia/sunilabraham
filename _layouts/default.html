<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ page.title }} | {{ site.title }}</title>

  <!-- Stylesheet -->
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="{{ '/assets/favicon.png' | relative_url }}">
  <link rel="apple-touch-icon" href="{{ '/assets/favicon.png' | relative_url }}">
  <link rel="shortcut icon" href="{{ '/assets/favicon.png' | relative_url }}">
  <!-- Lightbox CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css">
</head>

<body>
  <div class="site-wrapper">

    <!-- Header -->
    <header role="banner">
      {% include header.html %}
    </header>

    <!-- Navbar -->
    <nav role="navigation" aria-label="Main navigation">
      {% include navbar.html %}
    </nav>

    <!-- Main Content -->
    <main id="maincontent" role="main" class="content">
      {% if page.title %}
        <h1>{{ page.title }}</h1>

        <!-- Breadcrumb Navigation -->
        <nav class="breadcrumb" role="navigation" aria-label="Breadcrumb">
          <a href="{{ site.baseurl }}/">Home</a>
          {% assign parts = page.url | split: '/' %}
          {% assign current_path = '' %}

          {% for part in parts %}
            {% if part != '' and forloop.last == false %}
              {% assign current_path = current_path | append: '/' | append: part %}
              â€º <a href="{{ site.baseurl }}{{ current_path }}/">
                {% case part %}
                  {% when 'amaa' %}A. M. A. Ayrookuzhiel
                  {% else %}{{ part | replace:'-',' ' | capitalize }}
                {% endcase %}
              </a>
            {% endif %}
          {% endfor %}
          â€º <span>{{ page.title }}</span>
        </nav>
      {% endif %}
      {{ content }}
      {% include categories.html %}
    </main>
    
    <!-- Footer -->
    <footer role="contentinfo">
      {% include footer.html %}
    </footer>

  </div>

  <!-- Share Bar -->
  <aside role="complementary" aria-label="Share options">
    {% include share-bar.html %}
  </aside>

  <!-- Utility Toolbox -->
  <aside role="complementary" aria-label="Utility toolbox">
    {% include utility-toolbox.html %}
  </aside>
  
  <!-- =========================================================
       Section Header Link Script
       Purpose: Adds a small link icon beside headers and copies link on click
  ========================================================= -->
  <script>
  document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll("h2[id], h3[id], h4[id], h5[id], h6[id]").forEach(header => {
      const link = document.createElement("a");
      link.className = "header-link";
      link.href = "#" + header.id;
      link.title = "Copy link to this section";
      link.innerHTML = "ðŸ”—"; 

      link.addEventListener("click", (e) => {
        e.preventDefault();
        const fullURL = window.location.origin + window.location.pathname + "#" + header.id;
        navigator.clipboard.writeText(fullURL).then(() => {
          link.innerHTML = "âœ…";
          setTimeout(() => (link.innerHTML = "ðŸ”—"), 1200);
        });
      });

      //  Add the link icon after the heading text (to the right)
      header.appendChild(link);
    });
  });
  </script>

  <!-- Lightbox JS -->
  <script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>
  <script>
    window.addEventListener("load", function() {
      // Wrap all images automatically in a lightbox link
      document.querySelectorAll('img').forEach(function(img) {
        // Skip if already inside a link
        if (img.closest('a')) return;

        // Optional: skip very small images (like icons)
        if (img.width < 100 || img.height < 100) return;

        const link = document.createElement('a');
        link.href = img.src;
        link.classList.add('lightbox');
        img.parentNode.insertBefore(link, img);
        link.appendChild(img);
      });

      // Initialise GLightbox
      GLightbox({ selector: '.lightbox' });
    });
  </script>

</body>
</html>
