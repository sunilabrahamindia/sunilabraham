<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>{{ page.title }} | {{ site.title }}</title>

  <!-- SEO -->
  <meta name="description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
  <link rel="canonical" href="{{ page.url | absolute_url }}">

  <!-- Open Graph (social sharing) -->
  <meta property="og:site_name" content="{{ site.title }}">
  <meta property="og:title" content="{{ page.title }}">
  <meta property="og:description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
  <meta property="og:url" content="{{ page.url | absolute_url }}">
  <meta property="og:type" content="website">
  {% if page.image %}
  <meta property="og:image" content="{{ page.image | absolute_url }}">
  {% else %}
  <meta property="og:image" content="{{ '/assets/images/social-share-default.png' | absolute_url }}">
  {% endif %}

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ page.title }}">
  <meta name="twitter:description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
  <meta name="twitter:site" content="@sunil_abraham">

  <!-- Stylesheets -->
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  <link rel="icon" type="image/png" href="{{ '/assets/favicon.png' | relative_url }}">
  <link rel="apple-touch-icon" href="{{ '/assets/favicon.png' | relative_url }}">
  <link rel="shortcut icon" href="{{ '/assets/favicon.png' | relative_url }}">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css">

<!-- Structured Data: WebSite + Organization + Person -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "The Sunil Abraham Project",
  "alternateName": ["TSAP", "Sunil Abraham Project"],
  "url": "https://sunilabraham.in/",
  "publisher": {
    "@type": "Person",
    "name": "Sunil Abraham"
  }
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "The Sunil Abraham Project",
  "url": "https://sunilabraham.in/",
  "logo": "https://sunilabraham.in/assets/favicon.png",
  "founder": {
    "@type": "Person",
    "name": "Sunil Abraham"
  }
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Sunil Abraham",
  "alternateName": ["S. Abraham", "Sunil A. Abraham"],
  "url": "https://sunilabraham.in/",
  "description": "Researcher and technologist, founder of The Sunil Abraham Project.",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://sunilabraham.in/"
  },
  "officialWebsite": "https://sunilabraham.in/",
  "sameAs": [
    "https://x.com/sunil_abraham",
    "https://www.facebook.com/abrahamsunil",
    "https://www.linkedin.com/in/sunilaabraham/"
  ]
}
</script>
</head>

<body>
  <div class="site-wrapper">

    <!-- Header -->
    <header role="banner">
      {% include header.html %}
    </header>

    <!-- Navbar -->
    <nav role="navigation" aria-label="Main navigation">
      {% include navbar.html %}
    </nav>

    <!-- Main Content -->
    <main id="maincontent" role="main" class="content">
      {% if page.title %}
        <h1>{{ page.title }}</h1>

        <!-- Breadcrumb Navigation -->
        <nav class="breadcrumb" role="navigation" aria-label="Breadcrumb">
          <a href="{{ site.baseurl }}/">Home</a>
          {% assign parts = page.url | split: '/' %}
          {% assign current_path = '' %}

          {% for part in parts %}
            {% if part != '' and forloop.last == false %}
              {% assign current_path = current_path | append: '/' | append: part %}
              â€º <a href="{{ site.baseurl }}{{ current_path }}/">
                {% case part %}
                  {% when 'amaa' %}A. M. A. Ayrookuzhiel
                  {% else %}{{ part | replace:'-',' ' | capitalize }}
                {% endcase %}
              </a>
            {% endif %}
          {% endfor %}
          â€º <span>{{ page.title }}</span>
        </nav>
      {% endif %}
      {{ content }}
      {% include categories.html %}
      {% include page-data.html %}
    </main>
    
    <!-- Footer -->
{% include footer.html %}

  </div>
  
  <!-- Share Bar -->
  <aside role="complementary" aria-label="Share options">
    {% include share-bar.html %}
  </aside>

  <!-- Utility Toolbox -->
  <aside role="complementary" aria-label="Utility toolbox">
    {% include utility-toolbox.html %}
  </aside>
  
  <!-- =========================================================
       Section Header Link Script
       Purpose: Adds a small link icon beside headers and copies link on click
  ========================================================= -->
  <script>
  document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll("h2[id], h3[id], h4[id], h5[id], h6[id]").forEach(header => {
      const link = document.createElement("a");
      link.className = "header-link";
      link.href = "#" + header.id;
      link.title = "Copy link to this section";
      link.innerHTML = "ðŸ”—"; 

      link.addEventListener("click", (e) => {
        e.preventDefault();
        const fullURL = window.location.origin + window.location.pathname + "#" + header.id;
        navigator.clipboard.writeText(fullURL).then(() => {
          link.innerHTML = "âœ…";
          setTimeout(() => (link.innerHTML = "ðŸ”—"), 1200);
        });
      });

      //  Add the link icon after the heading text (to the right)
      header.appendChild(link);
    });
  });
  </script>

  <!-- Lightbox JS -->
  <script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>
  <script>
    window.addEventListener("load", function() {
      // Wrap all images automatically in a lightbox link
      document.querySelectorAll('img').forEach(function(img) {
        // Skip if already inside a link
        if (img.closest('a')) return;

        // Optional: skip very small images (like icons)
        if (img.width < 100 || img.height < 100) return;

        const link = document.createElement('a');
        link.href = img.src;
        link.classList.add('lightbox');
        img.parentNode.insertBefore(link, img);
        link.appendChild(img);
      });

      // Initialise GLightbox
      GLightbox({ selector: '.lightbox' });
    });
  </script>
// Make H2 section collapsible
<script>
document.addEventListener("DOMContentLoaded", function () {
  const sections = document.querySelectorAll("main h2");

  sections.forEach(h2 => {
    // Create toggle line
    const toggle = document.createElement("div");
    toggle.className = "h2-toggle-line";
    toggle.setAttribute("tabindex", "0");
    toggle.setAttribute("role", "button");
    toggle.setAttribute("aria-expanded", "true");

    // Inner text: Show/Hide + arrow
    const text = document.createElement("span");
    text.className = "toggle-text";
    text.textContent = "Hide";

    const arrow = document.createElement("span");
    arrow.className = "toggle-arrow";
    arrow.textContent = "â–¾";  // Expanded arrow

    toggle.appendChild(text);
    toggle.appendChild(arrow);

    // Insert toggle line under the H2
    h2.insertAdjacentElement("afterend", toggle);

    // Wrap everything until next H2 into a collapsible wrapper
    const wrapper = document.createElement("div");
    wrapper.className = "h2-content";

    let next = toggle.nextElementSibling;
    while (next && next.tagName !== "H2") {
      const temp = next.nextElementSibling;
      wrapper.appendChild(next);
      next = temp;
    }

    toggle.parentNode.insertBefore(wrapper, next);

    // Default expanded
    wrapper.style.maxHeight = wrapper.scrollHeight + "px";

    // Toggle behaviour
    function toggleSection() {
      const expanded = toggle.getAttribute("aria-expanded") === "true";

      if (expanded) {
        // Collapse
        wrapper.style.maxHeight = "0px";
        toggle.setAttribute("aria-expanded", "false");
        text.textContent = "Show";
        arrow.textContent = "â–¸"; // Right arrow
      } else {
        // Expand
        wrapper.style.maxHeight = wrapper.scrollHeight + "px";
        toggle.setAttribute("aria-expanded", "true");
        text.textContent = "Hide";
        arrow.textContent = "â–¾"; // Down arrow
      }
    }

    // Click and keyboard
    toggle.addEventListener("click", toggleSection);
    toggle.addEventListener("keypress", e => {
      if (e.key === "Enter" || e.key === " ") toggleSection();
    });
  });
});
</script>
</body>
</html>
